# This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: Deploy to Firebase Functions on merge
'on':
  push:
    branches:
      - main
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Install Firebase CLI
        uses: google/firebase-tools@v1

      - name: Login to Firebase (Optional, if token based auth is not used)
        uses: google/auth@v1
        with:
          credentials: ${{ secrets.GITHUB_TOKEN }}  # Remove if using environment variables below

      - name: Set Firebase Project Details (Modify variable names if needed)
        env:
          FIREBASE_PROJECT_ID: jeraby-84a7e  # Replace with your project ID from hosting workflow
          FIREBASE_ACCESS_TOKEN: ${{ secrets.FIREBASE_SERVICE_ACCOUNT_JERABY_84A7E }}  # Replace with secret name from hosting workflow

      - name: Deploy Functions
        run: firebase deploy --only functions
